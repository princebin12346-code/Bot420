const moment = require("moment-timezone");

module.exports.config = {
  name: "autohadis12",
  version: "1.1",
  author: "Mohammad Akash | ChatGPT Edition",
  role: 0,
  description: "à¦ªà§à¦°à¦¤à¦¿ à¦˜à¦£à§à¦Ÿà¦¾à§Ÿ à¦¦à¦¾à¦¨ à¦•à¦°à¦¾à¦° à¦«à¦œà¦¿à¦²à¦¤ à¦¬à¦¿à¦·à§Ÿà¦• à¦¹à¦¾à¦¦à¦¿à¦¸ à¦ªà¦¾à¦ à¦¾à¦¬à§‡ (à§§à§¨ à¦˜à¦£à§à¦Ÿà¦¾à§Ÿ à§§à§¨ à¦¹à¦¾à¦¦à¦¿à¦¸)",
  category: "AutoTime"
};

module.exports.onLoad = async function ({ api }) {

  setTimeout(() => {

    // â­ à¦¦à¦¾à¦¨ à¦•à¦°à¦¾à¦° à¦«à¦œà¦¿à¦²à¦¤ â€“ à§§à§¨ à¦Ÿà¦¿ à¦¹à¦¾à¦¦à¦¿à¦¸
    const hadithList = [
      "â à¦¸à¦¦à¦•à¦¾ à¦¸à¦®à§à¦ªà¦¦à¦•à§‡ à¦•à¦–à¦¨à§‹ à¦•à¦®à¦¾à§Ÿ à¦¨à¦¾à¥¤ âž â€” à¦¸à¦¹à¦¿à¦¹ à¦®à§à¦¸à¦²à¦¿à¦®",
      "â à¦†à¦²à§à¦²à¦¾à¦¹ à¦¦à¦¾à¦¨à¦¶à§€à¦²à¦•à§‡ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à§‡à¦¨à¥¤ âž â€” à¦¤à¦¿à¦°à¦®à¦¿à¦œà¦¿",
      "â à¦—à§‹à¦ªà¦¨à§‡ à¦¸à¦¦à¦•à¦¾ à¦¦à§‡à¦“à§Ÿà¦¾ à¦†à¦²à§à¦²à¦¾à¦¹à¦° à¦—à¦œà¦¬ à¦¨à¦¿à¦­à¦¿à§Ÿà§‡ à¦¦à§‡à§Ÿà¥¤ âž â€” à¦¤à¦¿à¦°à¦®à¦¿à¦œà¦¿",
      "â à¦¸à¦¦à¦•à¦¾ à¦¬à¦¿à¦ªà¦¦ à¦¦à§‚à¦° à¦•à¦°à§‡ à¦à¦¬à¦‚ à¦…à¦¶à§à¦­ à¦®à§ƒà¦¤à§à¦¯à§ à¦ªà§à¦°à¦¤à¦¿à¦°à§‹à¦§ à¦•à¦°à§‡à¥¤ âž â€” à¦¤à¦¿à¦°à¦®à¦¿à¦œà¦¿",
      "â à¦ªà§à¦°à¦¤à¦¿à¦¦à¦¿à¦¨ à¦¦à§à¦‡à¦œà¦¨ à¦«à§‡à¦°à§‡à¦¶à¦¤à¦¾ à¦¬à¦²à§‡à¦¨: à¦¹à§‡ à¦†à¦²à§à¦²à¦¾à¦¹, à¦¦à¦¾à¦¨à¦•à¦¾à¦°à§€à¦•à§‡ à¦ªà§à¦°à¦¤à¦¿à¦¦à¦¾à¦¨ à¦¦à¦¾à¦“à¥¤ âž â€” à¦¸à¦¹à¦¿à¦¹ à¦¬à§à¦–à¦¾à¦°à¦¿",
      "â à¦‰à¦¤à§à¦¤à¦® à¦¦à¦¾à¦¨ à¦¹à¦²à§‹ à¦…à¦­à¦¾à¦¬ à¦¥à¦¾à¦•à¦¾ à¦¸à¦¤à§à¦¤à§à¦¬à§‡à¦“ à¦¦à¦¾à¦¨ à¦•à¦°à¦¾à¥¤ âž â€” à¦¸à¦¹à¦¿à¦¹ à¦¬à§à¦–à¦¾à¦°à¦¿",
      "â à¦¸à¦¦à¦•à¦¾ à¦•à¦¿à§Ÿà¦¾à¦®à¦¤à§‡à¦° à¦¦à¦¿à¦¨à§‡ à¦¦à¦¾à¦¨à¦•à¦¾à¦°à§€à¦° à¦›à¦¾à§Ÿà¦¾ à¦¹à¦¬à§‡à¥¤ âž â€” à¦¤à¦¿à¦°à¦®à¦¿à¦œà¦¿",
      "â à¦¹à¦¾à¦²à¦¾à¦² à¦‰à¦ªà¦¾à¦°à§à¦œà¦¨ à¦¥à§‡à¦•à§‡ à¦¸à¦¦à¦•à¦¾ à¦•à¦°à¦²à§‡ à¦†à¦²à§à¦²à¦¾à¦¹ à¦¤à¦¾ à¦•à¦¬à§à¦² à¦•à¦°à§‡à¦¨à¥¤ âž â€” à¦¸à¦¹à¦¿à¦¹ à¦¬à§à¦–à¦¾à¦°à¦¿",
      "â à¦†à¦—à§à¦¨ à¦¥à§‡à¦•à§‡ à¦¬à¦¾à¦à¦šà§‹, à¦¯à¦¦à¦¿à¦“ à¦…à¦°à§à¦§à§‡à¦• à¦–à§‡à¦œà§à¦° à¦¦à¦¿à§Ÿà§‡ à¦¹à§Ÿà¥¤ âž â€” à¦¸à¦¹à¦¿à¦¹ à¦¬à§à¦–à¦¾à¦°à¦¿",
      "â à¦¸à¦¦à¦•à¦¾ à¦—à§à¦¨à¦¾à¦¹ à¦®à¦¿à¦Ÿà¦¿à§Ÿà§‡ à¦¦à§‡à§Ÿ à¦¯à§‡à¦®à¦¨ à¦ªà¦¾à¦¨à¦¿ à¦†à¦—à§à¦¨ à¦¨à¦¿à¦­à¦¿à§Ÿà§‡ à¦¦à§‡à§Ÿà¥¤ âž â€” à¦¤à¦¿à¦°à¦®à¦¿à¦œà¦¿",
      "â à¦¦à¦¾à¦¨à¦•à¦¾à¦°à§€à¦° à¦¹à¦¾à¦¤ à¦†à¦²à§à¦²à¦¾à¦¹à¦° à¦•à¦¾à¦›à§‡ à¦—à§à¦°à¦¹à¦£à¦¯à§‹à¦—à§à¦¯à¥¤ âž â€” à¦¤à¦¾à¦¬à¦¾à¦°à¦¾à¦¨à¦¿",
      "â à¦†à¦²à§à¦²à¦¾à¦¹à¦° à¦ªà¦¥à§‡ à¦¯à¦¾ à¦¬à§à¦¯à§Ÿ à¦•à¦°à§‹, à¦¤à¦¿à¦¨à¦¿ à¦¤à¦¾à¦° à¦‰à¦¤à§à¦¤à¦® à¦ªà§à¦°à¦¤à¦¿à¦¦à¦¾à¦¨ à¦¦à§‡à¦¨à¥¤ âž â€” à¦•à§à¦°à¦†à¦¨ à§©à§ª:à§©à§¯"
    ];

    let index = 0;

    console.log("â³ Auto Hadith (à¦¦à¦¾à¦¨ à¦•à¦°à¦¾à¦° à¦«à¦œà¦¿à¦²à¦¤) system activated...");

    const sendHadith = async () => {
      const now = moment().tz("Asia/Dhaka").format("mm:ss");
      if (now !== "00:00") return;

      const time = moment().tz("Asia/Dhaka").format("hh:mm A");
      const date = moment().tz("Asia/Dhaka").format("DD-MM-YYYY");

      const hour = parseInt(moment().tz("Asia/Dhaka").format("HH"));
      let period =
        hour >= 4 && hour < 12 ? "à¦¸à¦•à¦¾à¦²" :
        hour >= 12 && hour < 17 ? "à¦¦à§à¦ªà§à¦°" :
        hour >= 17 && hour < 20 ? "à¦¬à¦¿à¦•à§‡à¦²" :
        hour >= 20 ? "à¦°à¦¾à¦¤" : "à¦­à§‹à¦°";

      const currentHadith = hadithList[index];
      index = (index + 1) % hadithList.length;

      const message =
`â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
ðŸ•’ à¦¸à¦®à§Ÿ: ${period} ${time}
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ“– à¦¦à¦¾à¦¨ à¦•à¦°à¦¾à¦° à¦«à¦œà¦¿à¦²à¦¤  
${currentHadith}

ðŸ“… à¦¤à¦¾à¦°à¦¿à¦–: ${date}
ðŸ•‹ à¦†à¦¤-à¦¤à¦¾à¦•à§à¦¬à¦“à§Ÿà¦¾ à¦«à¦¾à¦‰à¦¨à§à¦¡à§‡à¦¶à¦¨ ðŸ•‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;

      try {
        const threads = await api.getThreadList(100, null, ["INBOX"]);
        const groups = threads.filter(t => t.isGroup);

        for (const g of groups) {
          await api.sendMessage(message, g.threadID);
        }

      } catch (err) {
        console.log("âŒ Error:", err);
      }
    };

    setInterval(sendHadith, 1000);
  }, 5000);
};

module.exports.onStart = () => {};
